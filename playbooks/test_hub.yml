---
- name: AAP 2.6 Configuration as Code
  hosts: localhost
  gather_facts: false
  connection: local

  vars:
    # Inject these via AAP Credentials or extra vars
    ah_host: "{{ ah_host }}"
    ah_username: "{{ ah_username }}"
    ah_password: "{{ ah_password }}"
    ah_validate_certs: false

    # Declarative Hub configuration
    hub_groups:
      - name: "group1"
        state: present

  tasks:
    - name: Ensure Automation Hub groups exist
      ansible.builtin.include_role:
        name: infra.aap_configuration.hub_group
