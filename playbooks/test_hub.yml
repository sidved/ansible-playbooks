- name: Create Automation Hub groups via infra.aap_configuration role
  hosts: localhost
  gather_facts: false
  connection: local

  collections:
    - infra.aap_configuration

  vars:
    controller_host: "https://controller.example.com"
    controller_username: "admin"
    controller_password: "redhat"
    validate_certs: false

    ah_groups:
      - name: "STT::group1"
        description: "Test group for AAP 2.6"
        state: present
      - name: "STT::group2"
        description: "Another test group"
        state: present

  roles:
    - role: infra.aap_configuration.hub_group
      vars:
        ah_groups: "{{ ah_groups }}"
        controller_host: "{{ controller_host }}"
        controller_username: "{{ controller_username }}"
        controller_password: "{{ controller_password }}"
        validate_certs: "{{ validate_certs }}"

